2025-04-29 10:49:34,089 - discord.client - INFO - logging in using static token
2025-04-29 10:49:35,275 - LarsBot - INFO - Tarea de limpieza de historiales iniciada
2025-04-29 10:49:35,277 - LarsBot - INFO - Limpieza de historiales completada. Canales activos: 0
2025-04-29 10:49:35,665 - discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: d8f938e0e1838570e7d6de289daaeedb).
2025-04-29 10:49:37,679 - LarsBot - INFO - [LARS] Lars Kremslinger#2190 ha despertado y ocupa su trono digital.
2025-04-29 10:49:38,034 - LarsBot - INFO - Comandos sincronizados
2025-04-29 10:50:15,408 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 10:51:01,678 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 10:51:29,705 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 10:51:59,394 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 10:52:01,076 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 10:52:50,005 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 10:54:16,466 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 10:54:40,205 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:00:14,338 - discord.client - INFO - logging in using static token
2025-04-29 11:00:15,547 - LarsBot - INFO - Tarea de limpieza de historiales iniciada
2025-04-29 11:00:15,548 - LarsBot - INFO - Limpieza de historiales completada. Canales activos: 0
2025-04-29 11:00:15,824 - discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 1948b0022bc9606451b1c8fc173d1547).
2025-04-29 11:01:51,643 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:10:24,278 - discord.client - INFO - logging in using static token
2025-04-29 11:10:25,369 - LarsBot - INFO - Tarea de limpieza iniciada
2025-04-29 11:10:25,370 - LarsBot - INFO - Limpieza de historiales. Canales activos: 0
2025-04-29 11:10:25,667 - discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 0c3d8741c344144534ce500f8a4b6dcd).
2025-04-29 11:10:27,729 - LarsBot - INFO - [LARS] Lars Kremslinger#2190 ha despertado y ocupa su trono digital.
2025-04-29 11:10:28,209 - LarsBot - INFO - Comandos sincronizados
2025-04-29 11:12:42,460 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:12:42,617 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-04-29 11:12:42,622 - LarsBot - ERROR - Error al evaluar acción administrativa: Error code: 400 - {'error': {'message': "Invalid parameter: 'response_format' of type 'json_object' is not supported with this model.", 'type': 'invalid_request_error', 'param': 'response_format', 'code': None}}
2025-04-29 11:12:42,630 - LarsBot - ERROR - Traceback (most recent call last):
  File "C:\Users\Daniel\Desktop\Daniel\rolpz\bots\Larsbot\lars.py", line 179, in evaluate_administrative_action
    decision_response = await asyncio.wait_for(
                        ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\asyncio\threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Daniel\Desktop\Daniel\rolpz\bots\Larsbot\lars.py", line 181, in <lambda>
    lambda: openai_client.chat.completions.create(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\site-packages\openai\_utils\_utils.py", line 287, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\site-packages\openai\resources\chat\completions\completions.py", line 925, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\site-packages\openai\_base_client.py", line 1239, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\site-packages\openai\_base_client.py", line 1034, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Invalid parameter: 'response_format' of type 'json_object' is not supported with this model.", 'type': 'invalid_request_error', 'param': 'response_format', 'code': None}}

2025-04-29 11:13:42,171 - LarsBot - ERROR - Error procesando mensaje: sequence index must be integer, not 'slice'
2025-04-29 11:13:42,173 - LarsBot - ERROR - Traceback (most recent call last):
  File "C:\Users\Daniel\Desktop\Daniel\rolpz\bots\Larsbot\lars.py", line 383, in on_message
    response, decision = await get_lars_response(
                         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Daniel\Desktop\Daniel\rolpz\bots\Larsbot\lars.py", line 87, in get_lars_response
    for entry in conversation_history[channel_id][-5:]:  # Solo últimas 5 interacciones
                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
TypeError: sequence index must be integer, not 'slice'

2025-04-29 11:18:05,878 - discord.client - INFO - logging in using static token
2025-04-29 11:18:07,030 - LarsBot - INFO - Tarea de limpieza iniciada
2025-04-29 11:18:07,031 - LarsBot - INFO - Limpieza de historiales. Canales activos: 0
2025-04-29 11:18:07,333 - discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: c070900662acdbfa0727161ed96a0ff6).
2025-04-29 11:18:09,338 - LarsBot - INFO - [LARS] Lars Kremslinger#2190 ha despertado y ocupa su trono digital.
2025-04-29 11:18:09,579 - LarsBot - INFO - Comandos sincronizados
2025-04-29 11:19:07,556 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:19:33,926 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:19:35,366 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:19:35,371 - LarsBot - INFO - No puedo moderar a .twinzen - su rol (Pandilla) es superior o igual al mío (Lars)
2025-04-29 11:20:02,445 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:20:04,051 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:20:35,796 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:21:09,828 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:21:11,848 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:21:11,850 - LarsBot - INFO - No puedo moderar a .twinzen - su rol (Pandilla) es superior o igual al mío (Lars)
2025-04-29 11:29:52,790 - LarsBot - INFO - Usuario whitelistBot expulsado
2025-04-29 11:29:54,267 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:37:28,210 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:37:29,975 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:38:06,519 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:38:07,915 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:38:24,481 - discord.gateway - INFO - Shard ID None has successfully RESUMED session c070900662acdbfa0727161ed96a0ff6.
2025-04-29 11:38:46,633 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:39:17,376 - LarsBot - INFO - Usuario .twinzen expulsado
2025-04-29 11:39:20,973 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:42:06,343 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 11:42:24,256 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 12:18:07,037 - LarsBot - INFO - Limpieza de historiales. Canales activos: 1
2025-04-29 12:18:58,978 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 12:20:56,699 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 12:20:58,401 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 12:20:58,542 - LarsBot - INFO - Mensaje de lucasdkov eliminado
2025-04-29 12:21:33,669 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 12:21:48,225 - LarsBot - ERROR - Error al obtener respuesta: 
2025-04-29 12:21:48,253 - LarsBot - ERROR - Traceback (most recent call last):
  File "C:\Users\Daniel\anaconda3\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\asyncio\threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Daniel\Desktop\Daniel\rolpz\bots\Larsbot\lars.py", line 116, in get_lars_response
    response = await asyncio.wait_for(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\asyncio\tasks.py", line 519, in wait_for
    async with timeouts.timeout(timeout):
  File "C:\Users\Daniel\anaconda3\Lib\asyncio\timeouts.py", line 115, in __aexit__
    raise TimeoutError from exc_val
TimeoutError

2025-04-29 12:23:03,109 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 12:23:34,617 - discord.client - INFO - logging in using static token
2025-04-29 12:23:35,740 - LarsBot - INFO - Tarea de limpieza iniciada
2025-04-29 12:23:35,740 - LarsBot - INFO - Limpieza de historiales. Canales activos: 0
2025-04-29 12:23:35,955 - discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 51b78ba11f841d64c36e8f766b8ebe67).
2025-04-29 12:23:37,964 - LarsBot - INFO - [LARS] Lars Kremslinger#2190 ha despertado y ocupa su trono digital.
2025-04-29 12:23:38,224 - LarsBot - INFO - Comandos sincronizados
2025-04-29 12:24:31,659 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 12:24:33,505 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 12:24:33,683 - LarsBot - INFO - Mensaje de .twinzen eliminado
2025-04-29 12:25:24,104 - LarsBot - ERROR - Error al obtener respuesta: 
2025-04-29 12:25:24,107 - LarsBot - ERROR - Traceback (most recent call last):
  File "C:\Users\Daniel\anaconda3\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\asyncio\threads.py", line 25, in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Daniel\Desktop\Daniel\rolpz\bots\Larsbot\lars.py", line 116, in get_lars_response
    response = await asyncio.wait_for(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Daniel\anaconda3\Lib\asyncio\tasks.py", line 519, in wait_for
    async with timeouts.timeout(timeout):
  File "C:\Users\Daniel\anaconda3\Lib\asyncio\timeouts.py", line 115, in __aexit__
    raise TimeoutError from exc_val
TimeoutError

2025-04-29 12:25:25,028 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 12:26:24,539 - discord.client - INFO - logging in using static token
2025-04-29 12:26:25,607 - LarsBot - INFO - Tarea de limpieza iniciada
2025-04-29 12:26:25,608 - LarsBot - INFO - Limpieza de historiales. Canales activos: 0
2025-04-29 12:26:25,846 - discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 99d2075c916423cd167043f4fbf5be95).
2025-04-29 12:26:27,863 - LarsBot - INFO - [LARS] Lars Kremslinger#2190 ha despertado y ocupa su trono digital.
2025-04-29 12:26:28,152 - LarsBot - INFO - Comandos sincronizados
2025-04-29 13:12:08,631 - discord.client - INFO - logging in using static token
2025-04-29 13:12:09,771 - LarsBot - INFO - Tarea de limpieza iniciada
2025-04-29 13:12:10,045 - discord.gateway - INFO - Shard ID None has connected to Gateway (Session ID: 4768e3d0491a0f33f248811046d9e44d).
2025-04-29 13:12:12,082 - LarsBot - INFO - [LARS] Lars Kremslinger#2190 ha despertado y ocupa su trono digital.
2025-04-29 13:12:12,314 - LarsBot - INFO - Comandos sincronizados
2025-04-29 13:27:29,653 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:27:31,095 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:27:31,345 - LarsBot - INFO - Usuario .twinzen expulsado
2025-04-29 13:30:47,846 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:31:32,863 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:31:34,826 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:33:05,376 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:33:07,106 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:37:15,317 - LarsBot - INFO - Usuario .twinzen expulsado
2025-04-29 13:37:16,478 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:58:42,769 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:59:13,566 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:59:15,271 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:59:43,235 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 13:59:44,606 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 14:02:54,747 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 14:03:10,793 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 14:12:09,824 - LarsBot - INFO - Limpieza completa de historiales. Canales eliminados: 0. Canales activos: 2
2025-04-29 14:45:39,868 - discord.gateway - INFO - Shard ID None has successfully RESUMED session 4768e3d0491a0f33f248811046d9e44d.
2025-04-29 14:54:43,022 - discord.gateway - INFO - Shard ID None has successfully RESUMED session 4768e3d0491a0f33f248811046d9e44d.
2025-04-29 15:12:09,974 - LarsBot - INFO - Limpieza completa de historiales. Canales eliminados: 0. Canales activos: 2
2025-04-29 15:47:30,217 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-04-29 15:54:18,236 - discord.gateway - INFO - Shard ID None has successfully RESUMED session 4768e3d0491a0f33f248811046d9e44d.
